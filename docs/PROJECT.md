# DailyKegel 项目说明

## 项目概述

DailyKegel 是一个部署在 BSC（Binance Smart Chain）上的 DApp，旨在提醒和激励用户每日进行凯格尔运动，锻炼盆底肌群，增强身体健康。

## 核心机制

### 赛季制

- 每个智能合约代表一个赛季
- 赛季拥有明确的开始时间和结束时间
- 赛季期间用户可进行每日打卡
- 新赛季部署新合约（可能包含新功能迭代）

### 打卡规则

- 每个地址每次打卡需距离上次打卡至少 24 小时
- 每次打卡必须捐献 UU 代币到奖池，最低 1 UU
- UU 代币价值极低（约 0.00001 美元），不构成用户负担

### 数据记录

合约需记录：
- 每个用户的打卡次数
- 每个用户的捐赠总量
- 打卡次数榜单（前 50 名）
- 捐赠数量榜单（前 50 名）
- 榜单同分时按地址顺序排序

### 奖池

- 奖池来源：用户打卡捐赠 + 管理员注资
- 管理员可向奖池注入 UU 代币作为额外激励

### 奖池分配（Merkle Tree 机制）

分配流程：
1. 赛季结束后，管理员从合约获取排行榜数据
2. 管理员线下计算分配方案（可排除作弊者）
3. 生成 Merkle Tree，将 Merkle Root 写入合约
4. 用户通过 `claim` 函数 + Merkle Proof 领取奖励

分配规则（线下执行，非链上强制）：
- 打卡次数最高者独享全部奖池
- 若并列第一，按捐赠数量等比分配
- 管理员拥有最终分配决定权

Claim 规则：
- 无领取期限
- 每个地址只能 claim 一次
- 合约记录 claim 状态，供管理员查看领取情况

### 赛季时间

- 开始时间：部署时确定，不可修改
- 结束时间：可调整，但不能早于当前时间

## 前端设计

### 页面结构

- 每个赛季对应一个独立页面（不同赛季可能有不同功能）
- 单页面包含所有组件：训练区、排行榜、个人数据、Claim 入口等

### 交互流程

**入口**
1. 用户进入赛季页面，显示「连接钱包」按钮
2. 连接钱包后，读取合约获取用户上次打卡时间
3. 判断是否可以打卡：
   - 距离上次打卡超过 24 小时，或从未打卡 → 进入训练流程
   - 未满 24 小时 → 显示倒计时

**训练流程**

训练分为 3 个部分，每部分之间间隔 10 秒休整：

1. 慢速训练（10 轮）：收紧 3 秒 → 放松 3 秒
2. 快速训练（15 轮）：收紧 1 秒 → 放松 1 秒
3. 耐力训练（3 轮）：收紧 10 秒 → 放松 10 秒

**打卡**
- 用户完成训练流程后，调用合约进行打卡
- 打卡时输入捐献的 UU 数量（最低 1 UU）
- 项目基于用户自觉，不做训练完成度的链上验证

### 页面组件

- 连接钱包按钮
- 训练引导 / 倒计时显示
- 打卡次数排行榜（前 50）
- 捐赠数量排行榜（前 50）
- 个人数据（打卡次数、捐赠总量）
- Claim 奖励入口（赛季结束后）

## 代币

### UU 代币

- 项目使用 UU 代币作为捐赠和奖池货币
- 正式环境使用已存在的 UU 代币合约
- 测试环境需要部署一个 ERC20 测试代币合约

## 智能合约清单

1. **UUToken.sol** - ERC20 测试代币（仅测试环境使用）
2. **DailyKegel.sol** - 赛季主合约
   - 打卡功能（24小时间隔限制）
   - 捐赠收集（转入奖池）
   - 用户数据记录（打卡次数、捐赠总量）
   - 排行榜维护（前 50 名）
   - 管理员注资
   - 赛季时间管理（结束时间可调）
   - Merkle Root 设置
   - 用户 Claim 奖励（Merkle Proof 验证）

## 设计原则

- 纯自觉机制，无金融博弈设计
- 简洁的用户体验，专注于健康习惯养成
- 奖池作为正向激励，而非投机工具
